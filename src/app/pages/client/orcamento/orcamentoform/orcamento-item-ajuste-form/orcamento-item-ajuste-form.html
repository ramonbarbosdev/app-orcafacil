<p-dialog header="Ajustes e Precificação" [modal]="true" [(visible)]="visible" [style]="{ width: '60rem' }"
  (onHide)="hideDialog()" (onShow)="showDialog()">

  <div *ngIf="itemEditavel" class="">


    <div class="flex items-center justify-between mb-4">
      <p class="text-mg font-semibold">
        Material / Condição
      </p>
    </div>
    <p-divider />


    <!-- Lista de campos -->
    <div *ngFor="let campo of itemEditavel.orcamentoItemCampoValor; let i = index" class="flex flex-col">

      <!-- Select do campo -->
      <div class=" flex flex-row gap-2 w-full">

        <app-layout-campo [width]="'md:w-12/12'">
          <p-select [options]="listaCampos" optionLabel="name" optionValue="code" filter="true" class="w-full"
            [(ngModel)]="campo.idCampoPersonalizado" placeholder="Selecione um campo" appendTo="body" (ngModelChange)="processarCampo($event,campo)">
          </p-select>
         
        </app-layout-campo>

        <app-layout-campo [width]="'md:w-6/12'">
          <p-inputNumber [(ngModel)]="campo.vlInformado" mode="currency" currency="BRL" locale="pt-BR" class="w-full">
          </p-inputNumber>
        </app-layout-campo>

        <app-layout-campo [width]="'md:w-6/12'">
          <input pInputText class="w-full"
            [(ngModel)]="campo.tpValor"  disabled   />

        </app-layout-campo>
        <app-layout-campo [width]="'md:w-3/12'">
            <p-button icon="pi pi-trash" severity="danger" text (onClick)="removerCampo(campo)">
          </p-button>
        </app-layout-campo>

      

      </div>

    </div>

    <p-divider />

    <!-- Adicionar novo campo -->
    <div class="pt-2">
      <p-button label="Campo Personalizado" icon="pi pi-plus" severity="secondary" (onClick)="adicionarCampo()">
      </p-button>
    </div>

  </div>

  <!-- Footer -->
  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-2">

      <p-button label="Atualiza Preço" icon="pi pi-refresh" (onClick)="confirmarAlteracoes()">
      </p-button>

    </div>
  </ng-template>

</p-dialog>